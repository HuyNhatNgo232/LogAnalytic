{% extends 'folder/base.html' %}

{% block content %}
<h1>New Item</h1>
<form method="POST" class="post-form" enctype="multipart/form-data">
    {% csrf_token %}
    {% for field in form %}
    <div class="form-group" id="registerForm">
        <span class="text-danger small">{{field.errors }}</span>
        <div class="" id="">{{field.label}}:</div>
        <div class="">{{ field }}</div>
    </div>
    {% endfor%}
    <button type="submit" class="save btn btn-default">Upload Item</button>
    <div class="progress">
        <div class="bar"></div>
        <div class="percent">0%</div>
    </div>
    <div id="status"></div>

</form>

<script>
    $(function() {

    var bar = $('.bar');
    var percent = $('.percent');
    var status = $('#status');

    $('form').ajaxForm({
        beforeSend: function() {
            status.empty();
            var percentVal = '0%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        uploadProgress: function(event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        complete: function(xhr) {
            status.html(xhr.responseText);
        }
    });
});

</script>
{% endblock %}
